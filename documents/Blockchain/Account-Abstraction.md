# Account Abstraction (계정 추상화)

> Web3의 대중화를 위한 핵심 기술 - 더 쉽고, 안전하고, 접근성 높은 블록체인 경험

---

## 📌 개요

블록체인 사용의 높은 진입장벽(시드 구문 관리, 가스비용 등)을 해결하기 위해 등장한 혁신적인 기술이다.

---

## 🔍 배경: 이더리움의 두 가지 계정 유형

### 1. EOA (Externally Owned Account)

| 특징       | 설명                       |
| ---------- | -------------------------- |
| 제어 방식  | 개인키(Private Key)로 제어 |
| 트랜잭션   | **직접 시작 가능** ✅      |
| 프로그래밍 | 불가능 ❌                  |
| 예시       | MetaMask 등 일반 지갑      |

### 2. Smart Contract Account

| 특징       | 설명                        |
| ---------- | --------------------------- |
| 제어 방식  | 스마트 컨트랙트 코드로 제어 |
| 트랜잭션   | 직접 시작 불가 ❌           |
| 프로그래밍 | **가능** ✅                 |
| 예시       | 멀티시그 지갑               |

### ⚠️ 핵심 문제

> **트랜잭션을 시작할 수 있는 계정은 프로그래밍이 불가능하고,  
> 프로그래밍이 가능한 계정은 트랜잭션을 시작할 수 없다.**

---

## 💡 해결책: Smart Wallet

Account Abstraction은 두 계정 유형의 구분을 **"추상화"**하여 단일 통합 계정 모델을 만든다.

### Smart Wallet이란?

- 사용자가 **직접 제어할 수 있는** 스마트 컨트랙트 계정
- EOA 없이도 트랜잭션 시작 가능
- **프로그래밍 가능성 + 트랜잭션 시작 능력** = 최상의 사용자 경험

---

## ✨ 주요 기능

### 1. 🔐 소셜 복구 (Social Recovery)

**문제**: 개인키/시드 구문 분실 시 자금 영구 손실

**해결**:

- **Guardian(보호자)** 지정: 친구, 가족, 본인 소유 다른 기기 등
- 계정 접근 권한 분실 시 보호자 다수결로 복구 가능
- Web2 스타일의 복구 프로세스 + 자기 수탁권 유지

---

### 2. ⛽ 가스비 후원 (Paymaster)

**문제**: 신규 사용자가 앱 사용 전 ETH를 먼저 구매해야 함

**해결**:

- **Paymaster**: 사용자 대신 가스비를 지불하는 제3자 서비스
- 앱 개발자가 사용자의 가스비를 대납 가능
- 거래소 방문 없이 바로 앱 사용 가능

---

### 3. 📦 트랜잭션 배칭 (Transaction Batching)

**문제**: 게임 등에서 모든 온체인 액션마다 서명 필요

**해결**:

- 여러 작업을 **단일 트랜잭션으로 묶음**
- 한 번 서명으로 전체 시퀀스 승인
- 끊김 없는 유연한 사용자 경험

---

### 4. 🛡️ 세션 키 & 다단계 인증

**문제**: 단일 서명이 EOA 전체 접근 권한 부여 → 리스크

**해결**:

| 기능             | 설명                                      |
| ---------------- | ----------------------------------------- |
| **Session Keys** | 특정 앱/기간에 제한된 권한의 임시 키 발급 |
| **다단계 인증**  | 고액 거래 시 복수 서명자/검증 단계 요구   |

> 예: 게임에 1시간 동안 인게임 액션만 허용하는 세션 키 발급

---

## ⚙️ 기술 구현: EIP-4337

### 특징

- 이더리움 코어 프로토콜 **변경 없이** 구현
- 기존 시스템과 **병렬로 작동**하는 상위 레벨 트랜잭션 시스템

### 작동 흐름

```
┌─────────────────┐
│  1. UserOperation  │  사용자가 의도(intent)를 담은 pseudo-transaction 생성
│     (Smart Wallet) │  예: "100 USDC를 ETH로 스왑"
└────────┬────────┘
         ▼
┌─────────────────┐
│  2. Alt Mempool    │  별도의 상위 레벨 멤풀로 전송
│                    │  (EOA용 표준 멤풀과 분리)
└────────┬────────┘
         ▼
┌─────────────────┐
│  3. Bundler        │  여러 UserOperation을 수집
│                    │  → 단일 이더리움 트랜잭션으로 묶음
│                    │  → 가스비 지불
└────────┬────────┘
         ▼
┌─────────────────┐
│  4. Entry Point    │  글로벌 스마트 컨트랙트
│     Contract       │  각 UserOperation 검증 후
│                    │  해당 Smart Wallet 호출하여 실행
└─────────────────┘
```

### 핵심 컴포넌트 정리

| 컴포넌트                 | 역할                                        |
| ------------------------ | ------------------------------------------- |
| **UserOperation**        | 사용자의 의도를 담은 pseudo-transaction     |
| **Alt Mempool**          | UserOperation 전용 대기 영역                |
| **Bundler**              | UserOperation 수집 & 번들링 & 가스비 지불   |
| **Entry Point Contract** | UserOperation 검증 & Smart Wallet 실행 호출 |

---

## 🌐 생태계

### Smart Wallet 프로젝트

- **Safe**
- **Argent**

### 인프라 제공자

- **Biconomy**
- **Alchemy**
- **Pimlico**

---

## 📝 결론

Account Abstraction은 단순한 개선이 아닌, **Web3 대중화의 핵심 열쇠**이다.

- ✅ 사용자 친화적인 경험
- ✅ 직관적인 인터페이스
- ✅ 안전한 자산 관리

블록체인 상호작용 방식을 근본적으로 재설계하여, 누구나 쉽게 Web3를 사용할 수 있는 시대를 열어가고 있다.
